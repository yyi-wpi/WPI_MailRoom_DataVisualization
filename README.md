Final Project - Interactive Data Visualization  
===

**Our Process Book:** https://docs.google.com/document/d/18grehGqWMgrc9NdPCNpJVS-ceePdD1HHudDVrbT-1Mc/edit?tab=t.0#heading=h.h0wey3iuet52

## Overview and Motivation
The goal of this project is to visualize WPI post office package data over a 30-day period to gain insights into package processing efficiency, storage patterns, and potential bottlenecks. By analyzing timestamps from package routing to storage and final delivery, we can track how long packages remain in different stages and identify areas where delays may occur. The dataset, sourced directly from the WPI mailroom, excludes recipient names for privacy protection while retaining key details such as locker assignments, carriers, and processing times. Understanding these trends will help improve package handling efficiency, optimize locker usage, and provide a clearer picture of how the campus mail system operates. Using visualizations, particularly a Sankey diagram, we can illustrate the flow of packages through the system, highlighting areas where processing times could be improved to enhance the overall experience for WPI students and staff.

## Database Cleaning and Processing
The original dataset from the WPI post office contained package tracking information spanning 30 days, capturing key details such as tracking numbers, locker assignments, carrier names, and timestamps for different stages of processing. However, the raw data also included inconsistencies, missing values, and unstructured fields that required preprocessing before analysis. Some columns, such as "Notes", were unnecessary, while others, like "Routed Date Time" and "Stored Date Time", had missing entries that needed to be addressed. The "Tracking #" field contained trailing underscores, and the "Location 1" column mixed undergrad and grad student package assignments without a clear distinction. Additionally, the "Origin City" and "Origin State" fields were incomplete in some cases, affecting the accuracy of geographic analysis. To prepare the dataset for visualization, we performed several cleaning and processing steps to ensure consistency and reliability. Missing values in critical columns were filled, tracking numbers were standardized, and a "Bank_Locker" identifier was created by combining locker bank and locker number to facilitate storage analysis. The timestamps for when packages were routed, stored, and delivered were converted into datetime format, allowing us to compute processing durations accurately. To enhance geographic tracking, the dataset was merged with an external city-to-county mapping file, filling in missing "Origin County" values where possible. There were many entries with proper city-state information that weren't given a county column entry after this process. To fix this, a new python script was created that would load in the CSV and use the “geopy” library to retrieve the county for a city-state tuple. These counties were saved to an output CSV as well as a temporarily stored dictionary. This dictionary sped up the process, bypassing the need to call to “geopy” if the county was already found. With numerous packages coming from the same cities in Massachusetts this optimization worked wonderfully. After these refinements, the cleaned dataset provided a structured and reliable foundation for analyzing package flow, processing times, and overall post office efficiency.

## Related Work
To visualize the package flow and processing times, we used a Sankey diagram, referencing the figure we posted above, to represent how long each package stays in different locations before being processed. Our cleaned dataset includes key timestamps: "Routed Date Time", "Stored Date Time", and "Delivered Date Time", which allow us to track the time spent at each stage of the process. The flow will start from the package’s arrival at the facility (Routed Date Time), moving to locker storage (Stored Date Time), and finally to delivery or pickup (Delivered Date Time). Each node in the Sankey diagram will represent a processing stage, including possible paths such as locker assignment, carrier pickup, and customer retrieval. The width of the connections will indicate the volume of packages transitioning between these stages, and the time spent at each stage can be color-coded to highlight delays or inefficiencies. Additionally, we can incorporate locker bank utilization by breaking down processing times per "Bank_Locker", identifying which locker areas experience the most congestion. If "Carrier" information is available, we can analyze differences in processing times for different shipping companies, helping to optimize workflows and improve package management within the post office system. This visualization will provide actionable insights into bottlenecks and operational efficiency.


## Exploratory Data Analysis
Our exploratory data analysis began with examining the raw package tracking data from the WPI post office system to understand its structure, identify patterns, and uncover potential insights that would guide our visualization design. Initial inspection revealed a diverse dataset containing key timestamps for package processing, carrier information, locker assignments, and geographic origin data, though with varying levels of completeness.

We first explored the temporal aspects of package processing by analyzing the timestamps for routing, storage, and delivery. Converting these timestamps to datetime format allowed us to calculate processing durations at each stage. This analysis revealed considerable variation in total processing times, with a right-skewed distribution showing most packages being processed relatively quickly but with a long tail of delays. The median time from routing to delivery was significantly lower than the mean (1241.46 hours), indicating outliers that affected the average processing time.

Geographic analysis of package origins presented both challenges and opportunities. Many packages, particularly those from Amazon, lacked specific origin information. For those with available city-state data, we used the geopy library to retrieve county information and merged this with FIPS codes to enable mapping. This revealed concentrated clusters of package origins in counties around Massachusetts, but also surprising volumes from distant locations like Cook County (Chicago) and counties in California, suggesting potential institutional relationships or student demographic patterns.

Carrier distribution analysis showed Amazon's dominance in the package ecosystem, handling approximately 40% of all packages, followed by USPS, FedEx, and Parcelforce as significant contributors. This insight proved valuable for understanding systemwide processing patterns, as each carrier demonstrated different efficiency metrics. The wide range of carriers (over 10) highlighted the complexity of the mail routing system.

Temporal patterns in package pickup behavior emerged when analyzing delivery timestamps by hour and day of week. Regardless of the day, student pickup activity concentrated between 12pm and 4pm, with clear peaks around 2pm on weekdays. Weekend activity showed lower overall volume but similar time-of-day patterns. This insight directly informed our decision to create a dedicated pickup heatmap visualization.

Locker bank utilization analysis revealed uneven distribution of package storage, with certain banks experiencing higher traffic and potentially creating bottlenecks in the system. By combining this with carrier and processing time data, we identified opportunities for optimization in locker assignment strategies.

The initial relationship exploration between carriers, processing times, and geographic origins guided our decision to implement a Sankey diagram to visualize package flow through the system. Early prototyping with the county heat map demonstrated the need for logarithmic scaling to address the extreme concentration of packages in Worcester County while still visualizing meaningful patterns across the country.

These exploratory findings directly shaped our visualization design decisions, leading us to focus on geographic distribution, temporal patterns, carrier efficiency, and system flow as the key aspects to represent in our final dashboard implementation. The EDA process also highlighted data quality issues that needed to be addressed, particularly in standardizing tracking numbers, filling missing geolocation data, and ensuring consistent datetime formatting across the dataset.

